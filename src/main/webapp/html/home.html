<!DOCTYPE html>
<html>
   <head>
      <title>E-Library</title>
      <link rel="stylesheet" type="text/css" href="css/home.css" />
   </head>

   <script src="js/sweetalert2.all.min.js"></script>
   <script src="js/sweetalert2.all.min.js"></script>
   <script src="js/vue.global.js"></script>

   <!-- Book navigation tree -->
   <script type="text/x-template" id="item-template">
	<li div>
	  <div
		   :class="getStyleClass()"
		   @click="toggle"
		   @dblclick="toggle"
		   @mouseover="hover = true"
		   @mouseleave="hover = false">
			{{ item.name }}
	  </div>
	  <ul v-show="isOpen" v-if="isFolder">
		<tree-item
		   class="item"
		   v-for="(child, index) in item.children"
		   :key="index"
		   :item="child">
		</tree-item>
	  </ul>
	</li>
  </script>

	<script>
	   function openNav() {
	     document.getElementById("mySidenav").style.width = "250px";
	     document.getElementById("topBar").style.paddingLeft = "250px";
	     document.getElementById("book-list").style.paddingLeft = "250px";
	   }
	
	   function closeNav() {
	     document.getElementById("mySidenav").style.width = "0";
	     document.getElementById("topBar").style.paddingLeft = "0";
	     document.getElementById("book-list").style.paddingLeft = "10px";
	   }
	   
	   function logOut(){
		   Swal.fire({
			   text: 'Logout from the library?',
			   showCancelButton: true,
			   confirmButtonText: 'Yes',
			   cancelButtonText: 'No'
			 }).then((result) => {
			   if (result.isConfirmed) {
				   window.location.href = "logout"
			   } else if (result.dismiss === Swal.DismissReason.cancel) {
				   // do nothing
			   }
			 })
	   }
   </script>
   <body>
	   	<div id="mySidenav" class="sidenav">
		  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
			<div id="book-navigator">
				<ul>
					<tree-item
					class="item"
					:item="sectionsTree"
					></tree-item>
				</ul>
			</div>
	 	</div>

		<div id="topBar" class="topbar">
		  <a id="showMenu" href="#menu" onclick="openNav()">Menu</a>
		  <a class="active" href="#home">Home</a>
		  <a href="#news">News</a>
		  <a href="admin/stats.xhtml">Admin</a>
		  <a href="#" onclick="logOut()">Logout</a>
		</div>
		<div id="book-list">
			<table v-for="book in bookList.books" class="bookLine">
				<tr>
					<td class="book_name">{{book.name}}</td>
				</tr>
				<tr>
					<td class="book_author">{{book.author}}</td>
				</tr>
				<tr>
					<td class="book_descr">{{book.description}}</td>
				</tr>
			</table>
		</div>

	<script>
		var bookList = {books: []};

		var sectionsTree = {
			name: "Sections", id: 0,
			children: [{ name: "loading...", id: 1 }]
		};

		let currentSectionId = -1;

		let updateBookList = function(sectionId){
			app.updateBooks(sectionId);
		}

	</script>
	<script src="js/elib.routes.js"></script>
	<script src="js/elib.book.navigator.js"></script>
	<script src="js/elib.books.list.js"></script>
   </body>
</html>